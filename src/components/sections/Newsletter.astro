---
import SectionLayout from "../../layouts/SectionLayout.astro";
import AlignmentLayout from "../../layouts/AlignmentLayout.astro";
import Title from "../Title.astro";
import Description from "../Description.astro";
import { cn } from "../../utils/cn";
import { Image } from "astro:assets";
import EmailIcon from "../../assets/icons/newsletter/email-icon.svg";
import ArrowIcon from "../../assets/icons/newsletter/arrow-icon.svg";

const sectionOuterClasses = cn(
  "flex items-center w-full relative",
  "newsletter-section",
);

const backgroundLayerClasses = cn(
  "absolute inset-y-0 left-1/2 -translate-x-1/2 w-screen -z-10",
  "bg-[linear-gradient(to_bottom,var(--color-newsletter-bg),var(--color-newsletter-bg))]",
);

const sectionInnerClasses = cn(
  "w-full py-[188px]",
  "flex justify-center items-center",
);

const containerClasses = cn(
  "flex flex-col items-center gap-8 w-full max-w-[788px]",
  "max-md:gap-6",
);

const headerClasses = cn("flex flex-col gap-4 text-center items-center w-full");

const inputContainerClasses = cn(
  "flex items-center gap-4 max-md:w-full max-md:justify-between p-4",
  "border border-[#A2A8B3] rounded-[8px]",
  "bg-transparent hover:bg-[#180F1E] transition-colors duration-300", // Using dark bg to match theme
  "focus-within:border-white focus-within:ring-1 focus-within:ring-white",
  "h-[48px]",
);

const inputClasses = cn(
  "bg-transparent border-none outline-none text-[#CBD1D6] max-w-[105px]",
  "placeholder:text-text-secondary placeholder:font-inter placeholder:text-[14px] placeholder:leading-[24px]",
  "font-inter text-[14px] leading-[24px]",
);

const iconContainerClasses = cn(
  "flex items-center justify-center w-6 h-6 text-[#F4F6F7]",
);

const submitButtonClasses = cn(
  "flex items-center justify-center min-w-8 h-8 rounded-full",
  "bg-transparent hover:bg-white/10 transition-colors duration-300",
  "cursor-pointer",
);
---

<SectionLayout
  outerClassName={sectionOuterClasses}
  innerClassName={sectionInnerClasses}
  autoMargin={true}
>
  <div class={backgroundLayerClasses}></div>
  <div class={containerClasses}>
    <AlignmentLayout
      direction="vertical"
      align="center"
      justify="center"
      className={headerClasses}
    >
      <Title
        text="Get our newsletter"
        className="text-[56px] leading-[64px] max-md:text-[32px] max-md:leading-[40px] text-center"
      />
      <Description
        text="Crafted for low-cost transfers, instant finality, and audit-ready transparency making digital value dependable for merchants, treasuries, and builders alike."
        className="max-w-[680px] text-center text-[#A2B1BE] text-base"
      />
    </AlignmentLayout>

    <div class={inputContainerClasses}>
      <div class={iconContainerClasses}>
        <Image
          src={EmailIcon}
          alt="Email"
          width={24}
          height={24}
          class="min-w-6 h-6 object-contain"
        />
      </div>

      <input type="email" placeholder="Enter your email" class={inputClasses} />

      <button class={submitButtonClasses} aria-label="Subscribe">
        <Image
          src={ArrowIcon}
          alt="Submit"
          width={24}
          height={24}
          class="w-6 h-6 object-contain"
        />
      </button>
    </div>
  </div>
</SectionLayout>
