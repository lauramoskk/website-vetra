---
import Badge from "../Badge.astro";
import SectionLayout from "../../layouts/SectionLayout.astro";
import AlignmentLayout from "../../layouts/AlignmentLayout.astro";
import Description from "../Description.astro";

import BackgroundImage from "../../assets/details/most-trusted-background.png";
import BackgroundImageMobile from "../../assets/details/most-trusted-background-mobile.png";
import { cn } from "../../utils/cn";
import { Image } from "astro:assets";
import ArrowIcon from "../../assets/icons/arrow.png";

// Classes organizadas por categoria para melhor legibilidade
const sectionOuterClasses = cn(
	// Layout
	"flex items-center w-full relative",
);

const sectionInnerClasses = cn(
	// Layout & Sizing
	"w-full h-[840px]",
	// Responsividade
	"max-sm:h-fit",
);

const mainLayoutClasses = cn(
	// Spacing & Layout
	"gap-[9.4rem] h-[-webkit-fill-available] relative z-10",
);

const contentSectionClasses = cn(
	// Spacing
	"gap-2",
	// Padding
	"p-4",
);

const heroTitleClasses = cn(
	// Typography
	"font-serif text-[56px] leading-[64px] font-bold text-center text-white",
	// Sizing
	"max-w-[788px]",
	// Responsividade
	"max-sm:text-[40px] max-sm:leading-[48px]",
);

const cardSectionClasses = cn(
	// Spacing
	"gap-2",
	// Layout
	"flex items-center w-full relative",
	// Responsividade
	"max-sm:flex-col",
);

const cardContentSectionClasses = cn(
	// Co
	"bg-white/10 backdrop-blur-[80px]",
);
---

<SectionLayout
	outerClassName={sectionOuterClasses}
	innerClassName={sectionInnerClasses}
	autoMargin={true}
>
<div
		class="most-trusted-background absolute inset-0 -z-10 bg-cover bg-center bg-no-repeat"
	>
	</div>

	<AlignmentLayout
		direction="vertical"
		justify="center"
		align="center"
		className={mainLayoutClasses}
	>
		<AlignmentLayout
			direction="vertical"
			justify="center"
			align="center"
			className="w-full"
			style="gap: 1.5rem;"
		>
			<Badge text="Badge Text">
				<Image
					src={ArrowIcon}
					alt="Arrow"
					class="w-full h-full object-contain"
				/>
			</Badge>

			<AlignmentLayout
				direction="vertical"
				justify="center"
				align="center"
			>
				<h1 class={heroTitleClasses}>Built for real user</h1>
				<Description
					text="Crafted for low-cost transfers, instant finality, and audit-ready transparency making digital value dependable for merchants, treasuries, and builders alike."
					className="max-w-[588px] text-center"
				/>
			</AlignmentLayout>
		</AlignmentLayout>

		<AlignmentLayout
			direction="horizontal"
			justify="center"
			align="center"
			className="w-full"
			style="gap: 2rem;"
			className={cardSectionClasses}
		>
			<AlignmentLayout
				direction="vertical"
				justify="center"
				align="center"
				className={cardContentSectionClasses}
			>
				<div class="w-full h-[184px] bg-white/5 rounded-t-2xl"></div>

				<AlignmentLayout
					direction="vertical"
					justify="center"
					align="center"
					className={contentSectionClasses}
				>
					<h3
						class="font-serif text-[20px] leading-[24px] font-medium text-center text-white"
					>
						Purpose
					</h3>
					<Description
						text="In a space crowded with opaque tokens and slow rails, VETRA aims to be the simplest way to hold and move a reliable dollar on Polygon. It’s built to feel boring in the best sense: predictable, auditable, and ready for everyday settlement."
						className="max-w-[588px] text-center"
					/>
				</AlignmentLayout>
			</AlignmentLayout>

			<AlignmentLayout
				direction="vertical"
				justify="center"
				align="center"
				className={contentSectionClasses}
			>
				<div class="w-full h-[184px] bg-white/5 rounded-t-2xl"></div>

				<AlignmentLayout
					direction="vertical"
					justify="center"
					align="center"
					className={contentSectionClasses}
				>
					<h3
						class="font-serif text-[20px] leading-[24px] font-medium text-center text-white"
					>
						User
					</h3>
					<Description
						text="Merchants and fintechs that need low-fee payments, treasuries and DAOs seeking a dependable unit of account, and developers who want a drop-in ERC-20 for onboarding users. VETRA fits where speed, clarity, and compatibility matter more than hype."
						className="max-w-[588px] text-center"
					/>
				</AlignmentLayout>
			</AlignmentLayout>

			<AlignmentLayout
				direction="vertical"
				justify="center"
				align="center"
				className={contentSectionClasses}
			>
				<div class="w-full h-[184px] bg-white/5 rounded-t-2xl"></div>

				<AlignmentLayout
					direction="vertical"
					justify="center"
					align="center"
					className={contentSectionClasses}
				>
					<h3
						class="font-serif text-[20px] leading-[24px] font-medium text-center text-white"
					>
						Impact
					</h3>
					<Description
						text="Money moves like messages: near-instant, with costs that don’t break the use case. Clear data and open documentation make integration straightforward, and a public transparency posture turns trust from a promise into something you can actually check"
						className="max-w-[588px] text-center"
					/>
				</AlignmentLayout>
			</AlignmentLayout>
		</AlignmentLayout>
	</AlignmentLayout>
</SectionLayout>

<script
	define:vars={{
		bgDesktop: BackgroundImage.src,
		bgMobile: BackgroundImageMobile.src,
	}}
>
	(function () {
		"use strict";
		const mostTrustedBackground = document.querySelector(".most-trusted-background");
		if (!mostTrustedBackground) return;

		function updateBackgroundImage() {
			const isMobile = window.innerWidth < 640;
			mostTrustedBackground.style.backgroundImage = `url('${isMobile ? bgMobile : bgDesktop}')`;
		}

		// Atualizar na inicialização
		if (document.readyState === "loading") {
			document.addEventListener("DOMContentLoaded", updateBackgroundImage, {
				once: true,
			});
		} else {
			updateBackgroundImage();
		}

		// Handle window resize com debounce
		let resizeTimeout;
		const handleResize = () => {
			clearTimeout(resizeTimeout);
			resizeTimeout = setTimeout(updateBackgroundImage, 250);
		};
		window.addEventListener("resize", handleResize, { passive: true });
	})();
</script>
