---
import { cn } from "../utils/cn";
import Image from "astro/components/Image.astro";
import type { ImageMetadata } from "astro";

interface Props {
	text: string;
	variant?: "primary" | "outline" | "secondary";
	className?: string;
	style?: string;
	icon?: ImageMetadata;
}

const {
	text = "Fale Conosco",
	variant = "primary",
	className = "",
	style = "",
	icon = undefined,
}: Props = Astro.props;

// Classes base do botão
const buttonBaseClasses = cn(
	// Visual
	"rounded-[200px]",
	// Typography
	"font-serif text-[14px] leading-6 font-semibold",
	// Interaction
	"cursor-pointer transition-all duration-300 ease-in-out",
);

// Mapeamento de classes para cada variant
const variantClasses = {
	primary: cn(
		// Background & Text
		"bg-[#643390] hover:bg-[#9A3CEB] text-white",
		// Layout
		"group relative flex items-center justify-between rounded-full p-1 h-14 min-w-[220px] overflow-hidden",
	),
	outline: cn(
		// Background & Border
		"bg-transparent border border-white/[0.08] text-white hover:bg-white/[0.04] transition-colors",
		// Layout
		"group relative flex items-center justify-between rounded-full p-1 h-14 min-w-[190px] overflow-hidden",
	),
};

// Classes finais do botão
const buttonClasses = cn(buttonBaseClasses, variantClasses[variant], className);
---

<button class={buttonClasses} style={style}>
	{
		variant === "primary" ? (
			<>
				<span class="absolute left-1 w-12 h-12 bg-[#C4B5FD] rounded-full flex items-center justify-center transition-all duration-500 ease-in-out group-hover:left-[calc(100%-3.25rem)] z-10">
					{icon ? (
						<Image
							src={icon}
							alt={text}
							width={20}
							height={20}
							class="text-[#5B21B6]"
						/>
					) : (
						<svg
							xmlns="http://www.w3.org/2000/svg"
							width="20"
							height="20"
							viewBox="0 0 24 24"
							fill="none"
							stroke="#5B21B6"
							stroke-width="2"
							stroke-linecap="round"
							stroke-linejoin="round"
							class="lucide lucide-chevron-right"
						>
							<path d="m9 18 6-6-6-6" />
						</svg>
					)}
				</span>
				<span class="relative w-full text-center z-0 transition-all duration-500 ease-in-out pl-8 group-hover:pl-0 group-hover:pr-8 ">
					{text}
				</span>
			</>
		) : variant === "outline" ? (
			<>
				<span class="absolute left-1 w-12 h-12 bg-white/[0.08] rounded-full flex items-center justify-center transition-all duration-500 ease-in-out group-hover:left-[calc(100%-3.25rem)] z-10">
					{icon ? (
						<Image
							src={icon}
							alt={text}
							width={20}
							height={20}
							class="text-white"
						/>
					) : (
						<svg
							xmlns="http://www.w3.org/2000/svg"
							width="20"
							height="20"
							viewBox="0 0 24 24"
							fill="none"
							stroke="white"
							stroke-width="2"
							stroke-linecap="round"
							stroke-linejoin="round"
							class="lucide lucide-chevron-right"
						>
							<path d="m9 18 6-6-6-6" />
						</svg>
					)}
				</span>
				<span class="relative w-full text-center z-0 transition-all duration-500 ease-in-out pl-8 group-hover:pl-0 group-hover:pr-8 ">
					{text}
				</span>
			</>
		) : (
			<>
				{text}
				{icon && <Image src={icon} alt={text} width={24} height={24} />}
			</>
		)
	}
</button>
